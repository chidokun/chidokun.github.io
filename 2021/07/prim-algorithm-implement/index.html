<!doctype html><html lang=vi>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=generator content="Hugo 0.87.0 with theme Tranquilpeak 0.4.8-BETA">
<meta name=author content="Nguyễn Tuấn">
<meta name=keywords content="graph,java,prim,spanning tree,cây khung,development,programming,chidokun,lập trình">
<meta name=description content="Bài viết Thuật toán Prim: Tìm cây khung nhỏ nhất đã giới thiệu đến các bạn ý tưởng của thuật toán này cũng như từng bước chạy thuật toán. Tiếp theo sẽ là phần hướng dẫn cài đặt thuật toán Prim cho đồ thị vô hướng có trọng số bằng ngôn ngữ Java.">
<meta property="og:description" content="Bài viết Thuật toán Prim: Tìm cây khung nhỏ nhất đã giới thiệu đến các bạn ý tưởng của thuật toán này cũng như từng bước chạy thuật toán. Tiếp theo sẽ là phần hướng dẫn cài đặt thuật toán Prim cho đồ thị vô hướng có trọng số bằng ngôn ngữ Java.">
<meta property="og:type" content="article">
<meta property="og:title" content="Thuật toán Prim: Cài đặt thuật toán">
<meta name=twitter:title content="Thuật toán Prim: Cài đặt thuật toán">
<meta property="og:url" content="https://chidokun.github.io/2021/07/prim-algorithm-implement/">
<meta property="twitter:url" content="https://chidokun.github.io/2021/07/prim-algorithm-implement/">
<meta property="og:site_name" content="Nguyễn Tuấn's Blog">
<meta property="og:description" content="Bài viết Thuật toán Prim: Tìm cây khung nhỏ nhất đã giới thiệu đến các bạn ý tưởng của thuật toán này cũng như từng bước chạy thuật toán. Tiếp theo sẽ là phần hướng dẫn cài đặt thuật toán Prim cho đồ thị vô hướng có trọng số bằng ngôn ngữ Java.">
<meta name=twitter:description content="Bài viết Thuật toán Prim: Tìm cây khung nhỏ nhất đã giới thiệu đến các bạn ý tưởng của thuật toán này cũng như từng bước chạy thuật toán. Tiếp theo sẽ là phần hướng dẫn cài đặt thuật toán Prim cho đồ thị vô hướng có trọng số bằng ngôn ngữ Java.">
<meta property="og:locale" content="vi">
<meta property="article:published_time" content="2021-07-25T20:26:28">
<meta property="article:modified_time" content="2021-07-25T20:26:28">
<meta property="article:section" content="programming">
<meta property="article:tag" content="algorithms">
<meta name=twitter:card content="summary">
<meta property="fb:app_id" content="445006706177461">
<meta property="og:image" content="https://chidokun.github.io/thumbnails/graph.png">
<meta property="twitter:image" content="https://chidokun.github.io/thumbnails/graph.png">
<meta property="og:image" content="https://www.gravatar.com/avatar/e09926cb6ae66048297c59c891a02e50?s=640">
<meta property="twitter:image" content="https://www.gravatar.com/avatar/e09926cb6ae66048297c59c891a02e50?s=640">
<title>Thuật toán Prim: Cài đặt thuật toán</title>
<meta name=google-site-verification content="MgXdDXZwDhcwwTzczA6YhQBynidGFAQUBd7PKu2ubfI">
<link rel=icon href=https://chidokun.github.io/favicon.png>
<link rel=canonical href=https://chidokun.github.io/2021/07/prim-algorithm-implement/>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin=anonymous>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin=anonymous>
<link href="https://fonts.googleapis.com/css?family=Noto+Serif:400,700|Roboto+Mono&display=swap&subset=vietnamese" rel=stylesheet>
<link rel=stylesheet href=https://chidokun.github.io/css/style-twzjdbqhmnnacqs0pwwdzcdbt8yhv8giawvjqjmyfoqnvazl0dalmnhdkvp7.min.css>
<link rel=stylesheet crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css integrity=sha384-TEMocfGvRuD1rIAacqrknm5BQZ7W7uWitoih+jMNFXQIbNl16bO8OZmylH/Vi/Ei>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-64965138-2','auto'),ga('send','pageview'))</script>
</head>
<body>
<div id=blog>
<header id=header data-behavior=5>
<i id=btn-open-sidebar class="fa fa-lg fa-bars"></i>
<div class=header-title>
<a class=header-title-link href=https://chidokun.github.io/>Nguyễn Tuấn's Blog</a>
</div>
<a class="header-right-icon st-search-show-outputs" href=https://chidokun.github.io/#search>
<i class="fa fa-lg fa-search"></i>
</a>
</header>
<nav id=sidebar data-behavior=5>
<div class=sidebar-container>
<div class=sidebar-profile>
<a href=https://chidokun.github.io/#about>
<img class=sidebar-profile-picture src="https://www.gravatar.com/avatar/e09926cb6ae66048297c59c891a02e50?s=110" alt="Ảnh đại diện">
</a>
<h4 class=sidebar-profile-name>Nguyễn Tuấn</h4>
<h5 class=sidebar-profile-bio>A guy with passionate at the code</h5>
</div>
<ul class=sidebar-buttons>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://chidokun.github.io/>
<i class="sidebar-button-icon fa fa-lg fa-home"></i>
<span class=sidebar-button-desc>Trang chủ</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://chidokun.github.io/categories>
<i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
<span class=sidebar-button-desc>Danh mục</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://chidokun.github.io/tags>
<i class="sidebar-button-icon fa fa-lg fa-tags"></i>
<span class=sidebar-button-desc>Thẻ thông tin</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://chidokun.github.io/archives>
<i class="sidebar-button-icon fa fa-lg fa-archive"></i>
<span class=sidebar-button-desc>Lưu trữ</span>
</a>
</li>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://chidokun.github.io/#about>
<i class="sidebar-button-icon fa fa-lg fa-question"></i>
<span class=sidebar-button-desc>Thông tin</span>
</a>
</li>
</ul>
<ul class=sidebar-buttons>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://github.com/chidokun target=_blank rel=noopener>
<i class="sidebar-button-icon fa fa-lg fa-github"></i>
<span class=sidebar-button-desc>GitHub</span>
</a>
</li>
</ul>
<ul class=sidebar-buttons>
<li class=sidebar-button>
<a class=sidebar-button-link href=https://chidokun.github.io/index.xml>
<i class="sidebar-button-icon fa fa-lg fa-rss"></i>
<span class=sidebar-button-desc>RSS</span>
</a>
</li>
</ul>
</div>
</nav>
<div id=main data-behavior=5 class=hasCoverMetaIn>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<div class="post-header main-content-wrap text-left">
<h1 class=post-title itemprop=headline>
Thuật toán Prim: Cài đặt thuật toán
</h1>
<div class="postShorten-meta post-meta">
<time itemprop=datePublished datetime=2021-07-25T20:26:28+07:00>
25 tháng 7 2021
</time>
<span>mục</span>
<a class=category-link href=https://chidokun.github.io/categories/programming>programming</a>
</div>
<div>
<div class=fb-like data-href=https://chidokun.github.io/2021/07/prim-algorithm-implement/ data-width data-layout=button_count data-action=like data-size=large data-share=false></div>
</div>
</div>
<div class="post-content markdown" itemprop=articleBody>
<div class=main-content-wrap>
<p>Bài viết <a href=https://chidokun.github.io/2021/07/prim-algorithm/>Thuật toán Prim: Tìm cây khung nhỏ nhất</a> đã giới thiệu đến các bạn ý tưởng của thuật toán này cũng như từng bước chạy thuật toán. Tiếp theo sẽ là phần hướng dẫn cài đặt <em>thuật toán Prim</em> cho đồ thị vô hướng có trọng số bằng ngôn ngữ Java.</p>
<h1 id=1-nhắc-lại-thuật-toán>1. Nhắc lại thuật toán</h1>
<p>Chúng ta cùng nhắc lại ý tưởng cơ bản của thuật toán Prim:</p>
<ul>
<li><em>Bước 1</em>: Chọn một đỉnh <code>v</code> bất kỳ làm đỉnh bắt đầu và đưa đỉnh <code>v</code> vào cây khung.</li>
<li><em>Bước 2</em>: Thêm tất cả các cạnh nối với <code>v</code> vào danh sách cạnh đang xét .</li>
<li><em>Bước 3</em>: Xét các cạnh trong danh sách đến khi hết:
<ul>
<li><em>Bước 3.1</em>: Lấy ra cạnh có trọng số nhỏ nhất nối từ <code>v1</code> đến một đỉnh <code>v2</code> chưa nằm trong cây khung. Đưa cạnh này và đỉnh <code>v2</code> vào cây khung.</li>
<li><em>Bước 3.2</em>: Đưa các cạnh nối từ đỉnh <code>v2</code> đến các đỉnh chưa nằm trong cây khung vào danh sách cạnh đang xét.</li>
</ul>
</li>
</ul>
<p>Ở bước lấy ra cạnh có trọng số nhỏ nhất trong số các cạnh đang xét, chúng ta sử dụng Min-PriorityQueue để lấy ra cạnh có trọng số nhỏ nhất.</p>
<h1 id=2-định-nghĩa-api>2. Định nghĩa API</h1>
<p>Để hiện thực thuật toán Prim, chúng ta có thể sử dụng cấu trúc <code>EdgeWeightedGraph</code> để lưu trữ đồ thị vô hướng có trọng số mà mình có giới thiệu qua ở bài viết <a href=https://chidokun.github.io/2021/06/graph-overview/>Tổng quan về đồ thị</a>. Chúng ta định nghĩa các phương thức như sau:</p>
<pre><code>    public class LazyPrimMST
----------------------------------------------------
                 LazyPrimMST(EdgeWeightedGraph g)
  Iterable&lt;Edge&gt; edges()
          double weight()
</code></pre><p>Class <code>LayzyPrimMST</code> sẽ làm nhiệm vụ tìm cây khung nhỏ nhất cho đồ thị <code>g</code> với các phương thức:</p>
<ul>
<li><em>LazyPrimMST(EdgeWeightedGraph g)</em>: Constructor nhận vào đồ thị vô hướng có trọng số <code>g</code> và thực hiện tìm cây khung nhỏ nhất.</li>
<li><em>edges()</em>: Trả về các cạnh của cây khung nhỏ nhất.</li>
<li><em>weight()</em>: Trả về trọng số của cây khung nhỏ nhất.</li>
</ul>
<p>Lúc này chúng ta có thể viết hàm <code>main</code> để test với đồ thị $G$ trong bài viết trước.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    EdgeWeightedGraph g <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> EdgeWeightedGraph<span style=color:#f92672>(</span>9<span style=color:#f92672>);</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> 1<span style=color:#f92672>,</span> 2<span style=color:#f92672>.</span><span style=color:#a6e22e>5</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> 2<span style=color:#f92672>,</span> 2<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>0<span style=color:#f92672>,</span> 3<span style=color:#f92672>,</span> 2<span style=color:#f92672>.</span><span style=color:#a6e22e>1</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>1<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 1<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> 4<span style=color:#f92672>,</span> 0<span style=color:#f92672>.</span><span style=color:#a6e22e>6</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>2<span style=color:#f92672>,</span> 5<span style=color:#f92672>,</span> 1<span style=color:#f92672>.</span><span style=color:#a6e22e>5</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>3<span style=color:#f92672>,</span> 5<span style=color:#f92672>,</span> 2<span style=color:#f92672>.</span><span style=color:#a6e22e>5</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>4<span style=color:#f92672>,</span> 6<span style=color:#f92672>,</span> 2<span style=color:#f92672>.</span><span style=color:#a6e22e>3</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>5<span style=color:#f92672>,</span> 6<span style=color:#f92672>,</span> 1<span style=color:#f92672>.</span><span style=color:#a6e22e>9</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>5<span style=color:#f92672>,</span> 7<span style=color:#f92672>,</span> 2<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>6<span style=color:#f92672>,</span> 7<span style=color:#f92672>,</span> 1<span style=color:#f92672>.</span><span style=color:#a6e22e>8</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>6<span style=color:#f92672>,</span> 8<span style=color:#f92672>,</span> 1<span style=color:#f92672>.</span><span style=color:#a6e22e>7</span><span style=color:#f92672>));</span>
    g<span style=color:#f92672>.</span><span style=color:#a6e22e>addEdge</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Edge<span style=color:#f92672>(</span>7<span style=color:#f92672>,</span> 8<span style=color:#f92672>,</span> 2<span style=color:#f92672>.</span><span style=color:#a6e22e>0</span><span style=color:#f92672>));</span>

    LazyPrimMST prim <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LazyPrimMST<span style=color:#f92672>(</span>g<span style=color:#f92672>);</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Edges: &#34;</span><span style=color:#f92672>);</span>
    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Edge e <span style=color:#f92672>:</span> prim<span style=color:#f92672>.</span><span style=color:#a6e22e>edges</span><span style=color:#f92672>())</span>
        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>printf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;%d-%d: %f\n&#34;</span><span style=color:#f92672>,</span> e<span style=color:#f92672>.</span><span style=color:#a6e22e>either</span><span style=color:#f92672>(),</span> e<span style=color:#f92672>.</span><span style=color:#a6e22e>other</span><span style=color:#f92672>(</span>e<span style=color:#f92672>.</span><span style=color:#a6e22e>either</span><span style=color:#f92672>()),</span> e<span style=color:#f92672>.</span><span style=color:#a6e22e>weight</span><span style=color:#f92672>());</span>
    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Weight: &#34;</span> <span style=color:#f92672>+</span> prim<span style=color:#f92672>.</span><span style=color:#a6e22e>weight</span><span style=color:#f92672>());</span>
<span style=color:#f92672>}</span>
</code></pre></div><h1 id=3-cài-đặt-thuật-toán>3. Cài đặt thuật toán.</h1>
<p>Bên trong class <code>LazyPrimMST</code>, chúng ta định nghĩa một số field hỗ trợ cho việc tìm cây khung nhỏ nhất.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>boolean</span><span style=color:#f92672>[]</span> marked<span style=color:#f92672>;</span>
<span style=color:#66d9ef>private</span> LinkedList<span style=color:#f92672>&lt;</span>Edge<span style=color:#f92672>&gt;</span> mst<span style=color:#f92672>;</span>
<span style=color:#66d9ef>private</span> PriorityQueue<span style=color:#f92672>&lt;</span>Edge<span style=color:#f92672>&gt;</span> pq<span style=color:#f92672>;</span>
</code></pre></div><ul>
<li><em>marked</em>: Mảng boolean đánh dấu một đỉnh đã được đưa vào cây khung hay chưa.</li>
<li><em>mst</em>: Danh sách các cạnh của cây khung.</li>
<li><em>pq</em>: Danh sách các cạnh dùng để xét sau mỗi bước chạy thuật toán. Sử dụng <code>PriorityQueue</code> để tiện lấy ra cạnh nhỏ nhất.</li>
</ul>
<p>Thuật toán của chúng ta sẽ chạy trong constructor, ở đây chúng ta sẽ định nghĩa thêm hàm <code>visit(G, v)</code> làm nhiệm vụ đánh dấu đỉnh <code>v</code> đã được đưa vào cây khung và đưa các cạnh kề vào PriorityQueue.</p>
<p>Các bước thực hiện:</p>
<ul>
<li><em>1.</em> &ldquo;Viếng thăm&rdquo; đỉnh $0$.</li>
<li><em>2.</em> Xét nếu queue vẫn có phần tử:
<ul>
<li><em>2.1.</em> Lấy cạnh nhỏ nhất trong danh sách đang xét.</li>
<li><em>2.2.</em> Nếu cả 2 đỉnh của cạnh này đều nằm trong cây khung thì bỏ qua.</li>
<li><em>2.3.</em> Còn không thì đưa cạnh nhỏ nhất này vào cây khung.</li>
<li><em>2.4.</em> &ldquo;Viếng thăm&rdquo; đỉnh chưa nằm trong cây khung.</li>
</ul>
</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> <span style=color:#a6e22e>LazyPrimMST</span><span style=color:#f92672>(</span>EdgeWeightedGraph g<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    pq <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PriorityQueue<span style=color:#f92672>&lt;&gt;(</span>Edge<span style=color:#f92672>::</span>compareTo<span style=color:#f92672>);</span>
    marked <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>boolean</span><span style=color:#f92672>[</span>g<span style=color:#f92672>.</span><span style=color:#a6e22e>V</span><span style=color:#f92672>()];</span>
    mst <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> LinkedList<span style=color:#f92672>&lt;&gt;();</span>
    visit<span style=color:#f92672>(</span>g<span style=color:#f92672>,</span> 0<span style=color:#f92672>);</span>
    <span style=color:#66d9ef>while</span> <span style=color:#f92672>(!</span>pq<span style=color:#f92672>.</span><span style=color:#a6e22e>isEmpty</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
        Edge e <span style=color:#f92672>=</span> pq<span style=color:#f92672>.</span><span style=color:#a6e22e>poll</span><span style=color:#f92672>();</span>
        <span style=color:#66d9ef>int</span> v <span style=color:#f92672>=</span> e<span style=color:#f92672>.</span><span style=color:#a6e22e>either</span><span style=color:#f92672>(),</span> w <span style=color:#f92672>=</span> e<span style=color:#f92672>.</span><span style=color:#a6e22e>other</span><span style=color:#f92672>(</span>v<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>marked<span style=color:#f92672>[</span>v<span style=color:#f92672>]</span> <span style=color:#f92672>&amp;&amp;</span> marked<span style=color:#f92672>[</span>w<span style=color:#f92672>])</span> <span style=color:#66d9ef>continue</span><span style=color:#f92672>;</span>
        mst<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>marked<span style=color:#f92672>[</span>v<span style=color:#f92672>])</span> visit<span style=color:#f92672>(</span>g<span style=color:#f92672>,</span> v<span style=color:#f92672>);</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>marked<span style=color:#f92672>[</span>w<span style=color:#f92672>])</span> visit<span style=color:#f92672>(</span>g<span style=color:#f92672>,</span> w<span style=color:#f92672>);</span>
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>visit</span><span style=color:#f92672>(</span>EdgeWeightedGraph G<span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span> v<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    marked<span style=color:#f92672>[</span>v<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>
    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>Edge e <span style=color:#f92672>:</span> G<span style=color:#f92672>.</span><span style=color:#a6e22e>adj</span><span style=color:#f92672>(</span>v<span style=color:#f92672>))</span>
        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>marked<span style=color:#f92672>[</span>e<span style=color:#f92672>.</span><span style=color:#a6e22e>other</span><span style=color:#f92672>(</span>v<span style=color:#f92672>)])</span> pq<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span> 
</code></pre></div><p>Cài đặt các phương thức còn lại của class <code>LazyPrimMST</code>:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>public</span> Iterable<span style=color:#f92672>&lt;</span>Edge<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>edges</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>return</span> mst<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>

<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>double</span> <span style=color:#a6e22e>weight</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>return</span> mst<span style=color:#f92672>.</span><span style=color:#a6e22e>stream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>mapToDouble</span><span style=color:#f92672>(</span>Edge<span style=color:#f92672>::</span>weight<span style=color:#f92672>).</span><span style=color:#a6e22e>sum</span><span style=color:#f92672>();</span>
<span style=color:#f92672>}</span>
</code></pre></div><p>Sau khi hoàn tất, cùng test lại hàm <code>main</code> để xem kết quả:</p>
<pre><code>Edges: 
0-2: 2.000000
2-4: 0.600000
1-4: 1.000000
2-5: 1.500000
5-6: 1.900000
6-8: 1.700000
6-7: 1.800000
0-3: 2.100000
Weight: 12.6
</code></pre><p>Vẫn đúng với kết quả chạy từng bước ở bài viết trước phải không nào!</p>
<h2 id=references>References</h2>
<ul>
<li><a href=https://algs4.cs.princeton.edu/home/>Algorithms, 4th Edition by Robert Sedgewick and Kevin Wayne</a></li>
</ul>
</div>
</div>
<div id=post-footer class="post-footer main-content-wrap">
<div class=post-footer-tags>
<span class="text-color-light text-small">THẺ ĐÁNH DẤU</span><br>
<a class="tag tag--primary tag--small" href=https://chidokun.github.io/tags/algorithms/>algorithms</a>
</div>
<div class=post-actions-wrap>
<nav>
<ul class="post-actions post-action-nav">
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=https://chidokun.github.io/2021/07/index-priority-queue/ data-tooltip="Index Priority Queue: Cải tiến Priority Queue">
<i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">Tiếp</span>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=https://chidokun.github.io/2021/07/prim-algorithm/ data-tooltip="Thuật toán Prim: Tìm cây khung nhỏ nhất">
<span class="hide-xs hide-sm text-small icon-mr">Trước</span>
<i class="fa fa-angle-right"></i>
</a>
</li>
</ul>
</nav>
<ul class="post-actions post-action-share">
<li class="post-action hide-lg hide-md hide-sm">
<a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions>
<i class="fa fa-share-alt"></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://chidokun.github.io/2021/07/prim-algorithm-implement/">
<i class="fa fa-facebook-official"></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://chidokun.github.io/2021/07/prim-algorithm-implement/">
<i class="fa fa-twitter"></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://plus.google.com/share?url=https://chidokun.github.io/2021/07/prim-algorithm-implement/">
<i class="fa fa-google-plus"></i>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default" href=#disqus_thread>
<i class="fa fa-comment-o"></i>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default" href=#>
<i class="fa fa-list"></i>
</a>
</li>
</ul>
</div>
<div id=fb-root></div>
<script>(function(b,c,d){var a,e=b.getElementsByTagName(c)[0];if(b.getElementById(d))return;a=b.createElement(c),a.id=d,a.src='https://connect.facebook.net/vi_VN/sdk.js#xfbml=1&version=v3.1&appId=445006706177461&autoLogAppEvents=1',e.parentNode.insertBefore(a,e)})(document,'script','facebook-jssdk')</script>
<div id=fb-cmt-thread class=fb-comments data-href=https://chidokun.github.io/2021/07/prim-algorithm-implement/ data-width=100%></div>
</div>
</article>
<footer id=footer class=main-content-wrap>
<span class=copyrights>
&copy; 2021 <a href=https://github.com/chidokun>Nguyễn Tuấn</a>. All Rights Reserved
</span>
</footer>
</div>
<div id=bottom-bar class=post-bottom-bar data-behavior=5>
<div class=post-actions-wrap>
<nav>
<ul class="post-actions post-action-nav">
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=https://chidokun.github.io/2021/07/index-priority-queue/ data-tooltip="Index Priority Queue: Cải tiến Priority Queue">
<i class="fa fa-angle-left"></i>
<span class="hide-xs hide-sm text-small icon-ml">Tiếp</span>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default tooltip--top" href=https://chidokun.github.io/2021/07/prim-algorithm/ data-tooltip="Thuật toán Prim: Tìm cây khung nhỏ nhất">
<span class="hide-xs hide-sm text-small icon-mr">Trước</span>
<i class="fa fa-angle-right"></i>
</a>
</li>
</ul>
</nav>
<ul class="post-actions post-action-share">
<li class="post-action hide-lg hide-md hide-sm">
<a class="post-action-btn btn btn--default btn-open-shareoptions" href=#btn-open-shareoptions>
<i class="fa fa-share-alt"></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://www.facebook.com/sharer/sharer.php?u=https://chidokun.github.io/2021/07/prim-algorithm-implement/">
<i class="fa fa-facebook-official"></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://twitter.com/intent/tweet?text=https://chidokun.github.io/2021/07/prim-algorithm-implement/">
<i class="fa fa-twitter"></i>
</a>
</li>
<li class="post-action hide-xs">
<a class="post-action-btn btn btn--default" target=new href="https://plus.google.com/share?url=https://chidokun.github.io/2021/07/prim-algorithm-implement/">
<i class="fa fa-google-plus"></i>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default" href=#disqus_thread>
<i class="fa fa-comment-o"></i>
</a>
</li>
<li class=post-action>
<a class="post-action-btn btn btn--default" href=#>
<i class="fa fa-list"></i>
</a>
</li>
</ul>
</div>
</div>
<div id=share-options-bar class=share-options-bar data-behavior=5>
<i id=btn-close-shareoptions class="fa fa-close"></i>
<ul class=share-options>
<li class=share-option>
<a class=share-option-btn target=new href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fchidokun.github.io%2F2021%2F07%2Fprim-algorithm-implement%2F">
<i class="fa fa-facebook-official"></i><span>Chia sẻ với Facebook</span>
</a>
</li>
<li class=share-option>
<a class=share-option-btn target=new href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fchidokun.github.io%2F2021%2F07%2Fprim-algorithm-implement%2F">
<i class="fa fa-twitter"></i><span>Chia sẻ với Twitter</span>
</a>
</li>
<li class=share-option>
<a class=share-option-btn target=new href="https://plus.google.com/share?url=https%3A%2F%2Fchidokun.github.io%2F2021%2F07%2Fprim-algorithm-implement%2F">
<i class="fa fa-google-plus"></i><span>Chia sẻ với Google+</span>
</a>
</li>
</ul>
</div>
<div id=share-options-mask class=share-options-mask></div>
</div>
<div id=about>
<div id=about-card>
<div id=about-btn-close>
<i class="fa fa-remove"></i>
</div>
<img id=about-card-picture src="https://www.gravatar.com/avatar/e09926cb6ae66048297c59c891a02e50?s=110" alt="Ảnh đại diện">
<h4 id=about-card-name>Nguyễn Tuấn</h4>
<div id=about-card-bio>A guy with passionate at the code</div>
<div id=about-card-job>
<i class="fa fa-briefcase"></i>
<br>
Software Engineer
</div>
<div id=about-card-location>
<i class="fa fa-map-marker"></i>
<br>
Saigon, Vietnam
</div>
</div>
</div>
<div id=cover style=background-image:url(https://chidokun.github.io/images/background.jpg)></div>
<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin=anonymous></script>
<script src=https://chidokun.github.io/js/script-pcw6v3xilnxydl1vddzazdverrnn9ctynvnxgwho987mfyqkuylcb1nlt.min.js></script>
<script crossorigin=anonymous integrity=sha384-jmxIlussZWB7qCuB+PgKG1uLjjxbVVIayPJwi6cG6Zb4YKq0JIw+OMnkkEC7kYCq src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js></script>
<script crossorigin=anonymous integrity=sha384-IiI65aU9ZYub2MY9zhtKd1H2ps7xxf+eb2YFG9lX6uRqpXCvBTOidPRCXCrQ++Uc src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/contrib/auto-render.min.js></script>
<script src=https://chidokun.github.io/js/main.js></script>
<script lang=javascript>window.onload=updateMinWidth,window.onresize=updateMinWidth,document.getElementById("sidebar").addEventListener("transitionend",updateMinWidth);function updateMinWidth(){var b=document.getElementById("sidebar"),a=document.getElementById("main"),c,d,e;a.style.minWidth="",c=getComputedStyle(a).getPropertyValue("min-width"),d=getComputedStyle(b).getPropertyValue("width"),e=getComputedStyle(b).getPropertyValue("left"),a.style.minWidth=`calc(${c} - ${d} - ${e})`}</script>
<script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:!1}),$('pre.code-highlight > code, pre > code').each(function(b,a){$(this).hasClass('codeblock')||$(this).addClass('codeblock'),hljs.highlightBlock(a)})})</script>
<script>var disqus_config=function(){this.page.url='https://chidokun.github.io/2021/07/prim-algorithm-implement/',this.page.identifier='/2021/07/prim-algorithm-implement/'};(function(){var a,b,c;if(window.location.hostname=="localhost")return;a=document,b=a.createElement('script'),c='nguyentuanit96',b.src='//'+c+'.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script>
</body>
</html>